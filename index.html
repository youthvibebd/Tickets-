<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>রকস্টার কনসার্ট </title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- html2canvas লাইব্রেরি যোগ করা হয়েছে -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #ff4d00;
            --secondary: #ff9a00;
            --dark: #0c0c0c;
            --darker: #080808;
            --light: #f0f0f0;
            --gray: #6c757d;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --rock-gradient: linear-gradient(135deg, var(--darker), #200000);
            --card-bg: rgba(25, 25, 25, 0.9);
            --card-border: rgba(255, 77, 0, 0.4);
            --card-hover: rgba(255, 77, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--rock-gradient);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 77, 0, 0.1) 0%, rgba(255, 77, 0, 0) 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 154, 0, 0.1) 0%, rgba(255, 154, 0, 0) 20%);
            position: relative;
            overflow-x: hidden;
            padding-bottom: 40px;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ff4d00' fill-opacity='0.08' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.15;
            z-index: -1;
        }

        /* ছোট হেডার */
        .rock-header {
            background: rgba(10, 10, 10, 0.95);
            padding: 0.8rem 0;
            border-bottom: 2px solid var(--primary);
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.7);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }

        .container {
            width: 92%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 1.8rem;
            color: var(--primary);
            transform: rotate(-20deg);
            text-shadow: 0 0 8px rgba(255, 77, 0, 0.4);
        }

        .logo-text {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 1.6rem;
            text-transform: uppercase;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .mobile-menu-btn {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px 10px;
            display: none;
        }

        .nav-tabs {
            display: flex;
            list-style: none;
            gap: 12px;
        }

        .tab-btn {
            background: none;
            border: none;
            color: var(--light);
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 0.95rem;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: rgba(255, 77, 0, 0.08);
        }

        .tab-btn::before {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .tab-btn:hover::before, .tab-btn.active::before {
            width: 100%;
        }

        .tab-btn:hover {
            color: var(--primary);
            background: rgba(255, 77, 0, 0.12);
        }

        .tab-btn.active {
            color: var(--primary);
            background: rgba(255, 77, 0, 0.15);
        }

        .tab-content {
            display: none;
            padding: 30px 0;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 2.2rem;
            text-align: center;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .section-title::after {
            content: "";
            display: block;
            width: 80px;
            height: 4px;
            background: var(--primary);
            margin: 12px auto;
            border-radius: 5px;
            box-shadow: 0 0 8px rgba(255, 77, 0, 0.4);
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.35);
            border: 1px solid var(--card-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 0 auto;
            max-width: 800px;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(255, 77, 0, 0.2);
            border-color: var(--primary);
        }

        .card-header {
            background: rgba(255, 77, 0, 0.12);
            padding: 18px;
            border-bottom: 2px solid var(--primary);
        }

        .card-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.6rem;
            color: var(--primary);
            margin: 0;
            text-shadow: 0 0 6px rgba(255, 77, 0, 0.25);
        }

        .card-body {
            padding: 22px;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--light);
            font-size: 1rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(40, 40, 40, 0.8);
            border: 2px solid rgba(255, 77, 0, 0.3);
            border-radius: 8px;
            color: var(--light);
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 77, 0, 0.2);
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 25px;
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(255, 77, 0, 0.35);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.4s;
        }

        .btn:hover::after {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 77, 0, 0.5);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-block {
            display: block;
            width: 100%;
            text-align: center;
        }

        .btn-sm {
            padding: 8px 20px;
            font-size: 0.9rem;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #1e7e34);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #bd2130);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e0a800);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info), #138496);
        }

        .payment-options {
            display: flex;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .payment-option {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 15px;
            background: rgba(45, 45, 45, 0.8);
            border: 2px solid rgba(255, 77, 0, 0.3);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        }

        .payment-option.selected {
            border-color: var(--primary);
            background: rgba(255, 77, 0, 0.12);
            box-shadow: 0 0 12px rgba(255, 77, 0, 0.25);
        }

        .payment-option i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary);
            text-shadow: 0 0 6px rgba(255, 77, 0, 0.3);
        }

        /* টিকিট প্রিভিউ স্টাইল আপডেট */
        .ticket-preview {
            background: rgba(35, 35, 35, 0.95);
            border: 2px dashed var(--primary);
            border-radius: 10px;
            padding: 25px;
            margin: 25px auto;
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-sizing: border-box;
        }

        .ticket-serial {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 1.8rem;
            color: var(--primary);
            letter-spacing: 1px;
            margin: 15px 0;
            text-shadow: 0 0 6px rgba(255, 77, 0, 0.3);
        }

        .qrcode {
            display: inline-block;
            padding: 15px;
            background: white;
            border-radius: 12px;
            margin: 20px auto;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid #eee;
        }

        .ticket-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .ticket-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            border: 2px solid var(--card-border);
            transition: all 0.3s ease;
            position: relative;
        }

        .ticket-card:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(255, 77, 0, 0.2);
            border-color: var(--primary);
        }

        .ticket-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 15px;
            border-radius: 18px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.8rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }

        .status-pending {
            background: var(--warning);
            color: #000;
        }

        .status-accepted {
            background: var(--success);
            color: white;
        }

        .status-rejected {
            background: var(--danger);
            color: white;
        }

        .ticket-header {
            background: rgba(255, 77, 0, 0.12);
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid var(--primary);
        }

        .ticket-body {
            padding: 20px;
        }

        .ticket-info {
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .ticket-label {
            font-weight: 700;
            color: var(--gray);
            font-size: 0.95rem;
        }

        .ticket-value {
            color: var(--light);
            font-weight: 600;
            font-size: 0.98rem;
        }

        .ticket-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .admin-login-form {
            max-width: 450px;
            margin: 0 auto;
        }

        .admin-panel {
            display: none;
        }

        .admin-tools {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .verify-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 22px;
            margin-top: 25px;
            border: 2px solid var(--card-border);
        }

        .verification-result {
            margin-top: 20px;
            padding: 18px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 700;
            display: none;
        }

        .result-valid {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid var(--success);
            color: var(--success);
        }

        .result-invalid {
            background: rgba(220, 53, 69, 0.2);
            border: 2px solid var(--danger);
            color: var(--danger);
        }

        .password-change-form {
            max-width: 450px;
            margin: 35px auto;
            padding: 25px;
            background: var(--card-bg);
            border-radius: 12px;
            border: 2px solid var(--card-border);
        }

        .footer {
            background: rgba(10, 10, 10, 0.95);
            padding: 25px 0;
            margin-top: 50px;
            border-top: 2px solid var(--primary);
            backdrop-filter: blur(8px);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copyright {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-link {
            display: inline-block;
            width: 38px;
            height: 38px;
            background: rgba(255, 77, 0, 0.12);
            border-radius: 50%;
            text-align: center;
            line-height: 38px;
            color: var(--primary);
            transition: all 0.3s ease;
            font-size: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .social-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px) rotate(8deg);
            box-shadow: 0 4px 12px rgba(255, 77, 0, 0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .hidden {
            display: none;
        }

        .transaction-field {
            display: block;
            margin-top: 15px;
        }

        .payment-info {
            background: rgba(40, 40, 40, 0.8);
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            border-left: 3px solid var(--primary);
            font-size: 0.95rem;
        }

        .payment-info h4 {
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .ticket-types {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .ticket-type-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            border: 2px solid var(--card-border);
            transition: all 0.3s ease;
            position: relative;
        }

        .ticket-type-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(255, 77, 0, 0.25);
            border-color: var(--primary);
        }

        .ticket-cover {
            height: 180px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .ticket-price {
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: var(--primary);
            color: white;
            padding: 6px 16px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
        }

        .ticket-type-body {
            padding: 18px;
        }

        .ticket-type-title {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: var(--primary);
            font-weight: 700;
        }

        .ticket-type-desc {
            margin-bottom: 18px;
            color: #ccc;
            font-size: 0.95rem;
        }

        .select-ticket-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 10px;
            color: white;
            font-weight: 700;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .select-ticket-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 77, 0, 0.35);
        }

        .ticket-launch-form {
            max-width: 500px;
            margin: 30px auto;
            padding: 25px;
            background: var(--card-bg);
            border-radius: 12px;
            border: 2px solid var(--card-border);
        }
        
        .mobile-menu-container {
            display: none;
            position: absolute;
            top: 100%;
            right: 15px;
            background: rgba(20, 20, 20, 0.95);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            z-index: 1000;
            min-width: 200px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .mobile-menu-container.active {
            display: block;
        }
        
        .mobile-tab-btn {
            display: block;
            width: 100%;
            padding: 12px 20px;
            background: none;
            border: none;
            color: var(--light);
            text-align: left;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mobile-tab-btn:hover {
            background: rgba(255, 77, 0, 0.15);
            color: var(--primary);
        }
        
        .mobile-tab-btn.active {
            background: rgba(255, 77, 0, 0.25);
            color: var(--primary);
        }
        
        .ticket-collection-info {
            background: rgba(40, 40, 40, 0.8);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border-left: 3px solid var(--primary);
        }
        
        .ticket-collection-info h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .cover-preview {
            max-width: 100%;
            height: 150px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid rgba(255, 77, 0, 0.3);
        }
        
        .ticket-section-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 1.8rem;
            text-align: center;
            margin: 40px 0 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            color: var(--primary);
        }
        
        .ticket-section-title::after {
            content: "";
            display: block;
            width: 60px;
            height: 3px;
            background: var(--primary);
            margin: 12px auto;
            border-radius: 5px;
            box-shadow: 0 0 8px rgba(255, 77, 0, 0.4);
        }

        /* এডমিন কন্ট্রোল প্যানেল স্টাইল */
        .admin-control-panel {
            background: rgba(30, 30, 30, 0.9);
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid var(--info);
        }
        
        .admin-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .admin-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .admin-section-title {
            color: var(--info);
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-section-title i {
            font-size: 1.2rem;
        }
        
        .admin-form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .admin-form-group {
            margin-bottom: 15px;
        }
        
        .admin-config-card {
            background: rgba(40, 40, 40, 0.8);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid var(--info);
        }
        
        .admin-config-card h4 {
            color: var(--info);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .admin-table th, .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .admin-table th {
            background: rgba(255, 77, 0, 0.15);
            color: var(--primary);
        }
        
        .admin-table tr:hover {
            background: rgba(255, 77, 0, 0.05);
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: row;
            }
            
            .nav-tabs {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .ticket-grid, .ticket-types {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .payment-options {
                flex-direction: column;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .admin-tools {
                flex-direction: column;
                align-items: center;
            }
            
            .ticket-actions {
                flex-direction: column;
            }
            
            .card {
                margin: 0 10px;
            }
            
            .admin-form-row {
                grid-template-columns: 1fr;
            }
            
            .ticket-preview {
                padding: 20px;
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <!-- হেডার -->
    <header class="rock-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-guitar"></i>
                    </div>
                    <div class="logo-text">রকস্টার</div>
                </div>
                
                <!-- মোবাইল মেনু বাটন -->
                <button class="mobile-menu-btn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                
                <!-- মোবাইল মেনু কন্টেইনার -->
                <div class="mobile-menu-container">
                    <button class="mobile-tab-btn active" data-tab="home">হোম</button>
                    <button class="mobile-tab-btn" data-tab="buy">টিকিট কিনুন</button>
                    <button class="mobile-tab-btn" data-tab="admin">এডমিন</button>
                    <button class="mobile-tab-btn" data-tab="verify">ভেরিফাই</button>
                </div>
                
                <!-- ডেস্কটপ নেভিগেশন -->
                <ul class="nav-tabs">
                    <li><button class="tab-btn active" data-tab="home">হোম</button></li>
                    <li><button class="tab-btn" data-tab="buy">টিকিট কিনুন</button></li>
                    <li><button class="tab-btn" data-tab="admin">এডমিন</button></li>
                    <li><button class="tab-btn" data-tab="verify">ভেরিফাই</button></li>
                </ul>
            </div>
        </div>
    </header>

    <!-- মূল কন্টেন্ট -->
    <main class="container">
        <!-- হোম ট্যাব -->
        <section id="home" class="tab-content active">
            <h2 class="section-title">রকস্টার কনসার্ট</h2>
            <p style="text-align: center; margin-bottom: 30px; max-width: 700px; margin-left: auto; margin-right: auto;"
         p/>   
            <!-- চলমান প্রোগ্রাম -->
            <h3 class="ticket-section-title">চলমান প্রোগ্রাম</h3>
            <div id="ongoingTicketTypes" class="ticket-types">
                <!-- চলমান টিকিট প্রকারগুলি এখানে ডায়নামিকভাবে লোড হবে -->
            </div>
            
            <!-- সমাপ্ত প্রোগ্রাম -->
            <h3 class="ticket-section-title">সমাপ্ত প্রোগ্রাম</h3>
            <div id="pastTicketTypes" class="ticket-types">
                <!-- সমাপ্ত টিকিট প্রকারগুলি এখানে ডায়নামিকভাবে লোড হবে -->
            </div>
            
            <!-- ইভেন্ট ডিটেইলস -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ইভেন্টের বিবরণ</h3>
                </div>
                <div class="card-body">
                    <div class="ticket-info">
                        <span class="ticket-label">তারিখ:</span>
                        <span class="ticket-value" id="eventDate">২৫ ডিসেম্বর ২০২৩</span>
                    </div>
                    <div class="ticket-info">
                        <span class="ticket-label">সময়:</span>
                        <span class="ticket-value" id="eventTime">সন্ধ্যা ৭:০০ - রাত ১১:০০</span>
                    </div>
                    <div class="ticket-info">
                        <span class="ticket-label">স্থান:</span>
                        <span class="ticket-value" id="eventVenue">আর্মি স্টেডিয়াম, ঢাকা</span>
                    </div>
                    <div class="ticket-info">
                        <span class="ticket-label">শিল্পীবৃন্দ:</span>
                        <span class="ticket-value" id="eventArtists">আর্টসেল, ওয়ারফেইজ, নগরবাউল, শিরোনাম</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- টিকিট ক্রয় ট্যাব -->
        <section id="buy" class="tab-content">
            <h2 class="section-title">টিকিট কিনুন</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">টিকিট অর্ডার ফর্ম</h3>
                </div>
                <div class="card-body">
                    <form id="ticketForm">
                        <div class="form-group">
                            <label class="form-label" for="name">আপনার নাম</label>
                            <input type="text" id="name" class="form-control" placeholder="পুরো নাম লিখুন" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="phone">ফোন নম্বর</label>
                            <input type="tel" id="phone" class="form-control" placeholder="01XXXXXXXXX" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="email">ইমেইল</label>
                            <input type="email" id="email" class="form-control" placeholder="you@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">টিকিটের ধরন</label>
                            <select id="ticketType" class="form-control">
                                <!-- চলমান টিকিট প্রকারগুলি এখানে ডায়নামিকভাবে লোড হবে -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">পেমেন্ট মেথড</label>
                            <div class="payment-options">
                                <div class="payment-option" data-method="bkash">
                                    <i class="fas fa-mobile-alt"></i>
                                    <div>বিকাশ</div>
                                </div>
                                <div class="payment-option" data-method="nagad">
                                    <i class="fas fa-wallet"></i>
                                    <div>নগদ</div>
                                </div>
                            </div>
                            <input type="hidden" id="paymentMethod" value="bkash" required>
                        </div>
                        
                        <!-- পেমেন্ট নম্বর প্রদর্শন -->
                        <div id="paymentInfo" class="payment-info">
                            <h4 id="paymentMethodTitle">বিকাশ পেমেন্ট নির্দেশনা</h4>
                            <div id="paymentDetails">
                                বিকাশ নম্বর: <strong id="bkashNumber">018239630097</strong><br>
                                টাকা পাঠানোর পর অবশ্যই ট্রানজেকশন আইডি দিন
                            </div>
                        </div>
                        
                        <!-- ট্রানজেকশন নম্বর ফিল্ড -->
                        <div id="transactionField" class="form-group transaction-field">
                            <label class="form-label" for="transactionId">ট্রানজেকশন আইডি</label>
                            <input type="text" id="transactionId" class="form-control" placeholder="ট্রানজেকশন আইডি লিখুন" required>
                        </div>
                        
                        <button type="submit" class="btn btn-block">টিকিট কিনুন</button>
                    </form>
                    
                    <div id="ticketPreview" class="ticket-preview hidden">
                        <h3>আপনার টিকিট তৈরি হয়েছে!</h3>
                        <div class="ticket-serial" id="ticketSerialDisplay">TK-XXXX-XXXX-XXXX</div>
                        <div id="ticketQrCode" class="qrcode"></div>
                        <p>এই টিকিটটি সংরক্ষণ করুন। এন্ট্রির সময় এডমিন কর্তৃক ভেরিফাইকরণ করা হবে।</p>
                        <button id="downloadTicket" class="btn btn-sm">PDF ডাউনলোড করুন</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- এডমিন ট্যাব -->
        <section id="admin" class="tab-content">
            <div id="adminLogin">
                <h2 class="section-title">এডমিন লগইন</h2>
                <div class="card admin-login-form">
                    <div class="card-header">
                        <h3 class="card-title">এডমিন প্যানেল একসেস</h3>
                    </div>
                    <div class="card-body">
                        <form id="loginForm">
                            <div class="form-group">
                                <label class="form-label" for="adminUsername">ইউজারনেম</label>
                                <input type="text" id="adminUsername" class="form-control" placeholder="এডমিন ইউজারনেম" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="adminPassword">পাসওয়ার্ড</label>
                                <input type="password" id="adminPassword" class="form-control" placeholder="পাসওয়ার্ড" required>
                            </div>
                            
                            <button type="submit" class="btn btn-block">লগইন করুন</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div id="adminPanel" class="admin-panel">
                <h2 class="section-title">এডমিন কন্ট্রোল প্যানেল</h2>
                
                <div class="admin-tools">
                    <button id="manageEventsBtn" class="btn btn-info">ইভেন্ট ম্যানেজ</button>
                    <button id="manageTicketsBtn" class="btn btn-success">টিকিট ম্যানেজ</button>
                    <button id="paymentConfigBtn" class="btn btn-warning">পেমেন্ট সেটিংস</button>
                    <button id="changePasswordBtn" class="btn">পাসওয়ার্ড পরিবর্তন</button>
                    <button id="logoutBtn" class="btn btn-danger">লগ আউট</button>
                </div>
                
                <!-- এডমিন কন্ট্রোল প্যানেল -->
                <div id="adminControlPanel" class="admin-control-panel">
                    <!-- ইভেন্ট ম্যানেজমেন্ট -->
                    <div id="eventManagement" class="admin-section">
                        <h3 class="admin-section-title"><i class="fas fa-calendar-alt"></i> ইভেন্ট ম্যানেজমেন্ট</h3>
                        
                        <div class="admin-config-card">
                            <h4>বর্তমান ইভেন্ট তথ্য</h4>
                            <p><strong>তারিখ:</strong> <span id="currentEventDate"></span></p>
                            <p><strong>সময়:</strong> <span id="currentEventTime"></span></p>
                            <p><strong>স্থান:</strong> <span id="currentEventVenue"></span></p>
                            <p><strong>শিল্পীবৃন্দ:</strong> <span id="currentEventArtists"></span></p>
                        </div>
                        
                        <form id="eventForm" class="admin-form-row">
                            <div class="admin-form-group">
                                <label class="form-label" for="editEventDate">তারিখ</label>
                                <input type="text" id="editEventDate" class="form-control" placeholder="ইভেন্টের তারিখ" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="editEventTime">সময়</label>
                                <input type="text" id="editEventTime" class="form-control" placeholder="ইভেন্টের সময়" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="editEventVenue">স্থান</label>
                                <input type="text" id="editEventVenue" class="form-control" placeholder="ইভেন্টের স্থান" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="editEventArtists">শিল্পীবৃন্দ</label>
                                <input type="text" id="editEventArtists" class="form-control" placeholder="শিল্পীদের নাম (কমা দ্বারা আলাদা)" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <button type="submit" class="btn btn-success">ইভেন্ট আপডেট করুন</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- টিকিট প্রকার ম্যানেজমেন্ট -->
                    <div id="ticketTypeManagement" class="admin-section">
                        <h3 class="admin-section-title"><i class="fas fa-ticket-alt"></i> টিকিট প্রকার ম্যানেজমেন্ট</h3>
                        
                        <div class="admin-form-row">
                            <div class="admin-form-group">
                                <label class="form-label" for="ticketName">টিকিটের নাম</label>
                                <input type="text" id="ticketName" class="form-control" placeholder="টিকিটের নাম লিখুন" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="ticketPrice">টিকিটের মূল্য</label>
                                <input type="number" id="ticketPrice" class="form-control" placeholder="টাকার পরিমাণ" required>
                            </div>
                        </div>
                        
                        <div class="admin-form-group">
                            <label class="form-label" for="ticketDescription">টিকিটের বিবরণ</label>
                            <textarea id="ticketDescription" class="form-control" rows="3" placeholder="টিকিটের বিবরণ লিখুন" required></textarea>
                        </div>
                        
                        <div class="admin-form-row">
                            <div class="admin-form-group">
                                <label class="form-label" for="ticketImage">টিকিট কভার ছবি (URL)</label>
                                <input type="text" id="ticketImage" class="form-control" placeholder="ছবির URL লিখুন" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="ticketStatus">স্ট্যাটাস</label>
                                <select id="ticketStatus" class="form-control">
                                    <option value="ongoing">চলমান</option>
                                    <option value="past">সমাপ্ত</option>
                                </select>
                            </div>
                        </div>
                        
                        <input type="hidden" id="ticketEditId" value="">
                        
                        <div class="admin-form-group">
                            <button type="button" id="addTicketTypeBtn" class="btn btn-success">টিকিট যোগ করুন</button>
                            <button type="button" id="updateTicketTypeBtn" class="btn btn-info hidden">আপডেট করুন</button>
                            <button type="button" id="cancelTicketEditBtn" class="btn btn-danger hidden">বাতিল করুন</button>
                        </div>
                        
                        <div class="admin-config-card">
                            <h4>বর্তমান টিকিট প্রকার</h4>
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>নাম</th>
                                        <th>মূল্য</th>
                                        <th>স্ট্যাটাস</th>
                                        <th>অ্যাকশন</th>
                                    </tr>
                                </thead>
                                <tbody id="ticketTypesTableBody">
                                    <!-- টিকিট প্রকারগুলি এখানে লোড হবে -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- পেমেন্ট কনফিগারেশন -->
                    <div id="paymentConfiguration" class="admin-section">
                        <h3 class="admin-section-title"><i class="fas fa-money-bill-wave"></i> পেমেন্ট কনফিগারেশন</h3>
                        
                        <div class="admin-form-row">
                            <div class="admin-form-group">
                                <label class="form-label" for="bkashNumberInput">বিকাশ নম্বর</label>
                                <input type="text" id="bkashNumberInput" class="form-control" placeholder="বিকাশ নম্বর" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="nagadNumberInput">নগদ নম্বর</label>
                                <input type="text" id="nagadNumberInput" class="form-control" placeholder="নগদ নম্বর" required>
                            </div>
                        </div>
                        
                        <div class="admin-form-group">
                            <button type="button" id="savePaymentConfigBtn" class="btn btn-success">পেমেন্ট সেটিংস সেভ করুন</button>
                        </div>
                        
                        <div class="admin-config-card">
                            <h4>বর্তমান পেমেন্ট তথ্য</h4>
                            <p><strong>বিকাশ নম্বর:</strong> <span id="currentBkashNumber"></span></p>
                            <p><strong>নগদ নম্বর:</strong> <span id="currentNagadNumber"></span></p>
                        </div>
                    </div>
                    
                    <!-- পাসওয়ার্ড পরিবর্তন -->
                    <div id="passwordChangeForm" class="admin-section">
                        <h3 class="admin-section-title"><i class="fas fa-key"></i> পাসওয়ার্ড পরিবর্তন</h3>
                        
                        <form id="changePasswordForm" class="admin-form-row">
                            <div class="admin-form-group">
                                <label class="form-label" for="currentPassword">বর্তমান পাসওয়ার্ড</label>
                                <input type="password" id="currentPassword" class="form-control" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="newPassword">নতুন পাসওয়ার্ড</label>
                                <input type="password" id="newPassword" class="form-control" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <label class="form-label" for="confirmPassword">পাসওয়ার্ড নিশ্চিত করুন</label>
                                <input type="password" id="confirmPassword" class="form-control" required>
                            </div>
                            
                            <div class="admin-form-group">
                                <button type="submit" class="btn btn-success">পাসওয়ার্ড পরিবর্তন করুন</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- টিকিট ম্যানেজমেন্ট -->
                <div class="admin-section">
                    <h3 class="admin-section-title"><i class="fas fa-list"></i> টিকিট ম্যানেজমেন্ট</h3>
                    
                    <div id="ticketList" class="ticket-grid">
                        <!-- টিকিট কার্ডগুলো এখানে জেনারেট হবে -->
                    </div>
                </div>
            </div>
        </section>

        <!-- টিকিট ভেরিফিকেশন ট্যাব -->
        <section id="verify" class="tab-content">
            <h2 class="section-title">টিকিট ভেরিফিকেশন</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">টিকিট স্ক্যান বা চেক করুন</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label class="form-label">টিকিট সিরিয়াল নম্বর লিখুন</label>
                        <input type="text" id="verifySerial" class="form-control" placeholder="TK-XXXX-XXXX-XXXX">
                    </div>
                    
                    <button id="verifyTicketBtn" class="btn btn-block">টিকিট ভেরিফাই করুন</button>
                    
                    <div class="verify-section">
                        <h4>অথবা QR কোড স্ক্যান করুন</h4>
                        <div style="text-align: center;">
                            <video id="scanner" width="100%" height="250" style="border-radius: 8px; background: #000;"></video>
                        </div>
                        <button id="startScanner" class="btn btn-sm">স্ক্যানার শুরু করুন</button>
                        <button id="stopScanner" class="btn btn-sm btn-danger" style="display: none;">স্ক্যানার বন্ধ করুন</button>
                    </div>
                    
                    <div class="ticket-collection-info">
                        <h3>ভেন্যু থেকে টিকিট সংগ্রহ</h3>
                        <p>আপনার টিকিট ভেরিফাই হওয়ার পর আপনি ভেন্যুর নির্দিষ্ট বুথ থেকে প্রবেশ করতে পারবেন।</p>
                        <p><strong>সময়:</strong> কনসার্ট শুরুর ৩ ঘন্টা আগে থেকে শুরু</p>
                        <p><strong>স্থান:</strong> <span id="collectionVenue">আর্মি স্টেডিয়াম, প্রধান গেটের পাশে টিকিট কাউন্টার</span></p>
                    </div>
                    
                    <div id="verificationResult" class="verification-result">
                        <!-- ভেরিফিকেশন রেজাল্ট এখানে দেখানো হবে -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- ফুটার -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="copyright">
                    &copy; ২০২৩ রকস্টার কনসার্ট. সকল অধিকার সংরক্ষিত।
                </div>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ডেটা স্ট্রাকচার এবং ইনিশিয়াল সেটআপ
        const TICKETS_KEY = 'rockstar_tickets';
        const ADMIN_CREDENTIALS_KEY = 'admin_credentials';
        const TICKET_TYPES_KEY = 'rockstar_ticket_types';
        const EVENT_DETAILS_KEY = 'rockstar_event_details';
        const PAYMENT_CONFIG_KEY = 'rockstar_payment_config';
        
        // লোকাল স্টোরেজ থেকে ডেটা লোড
        function loadTickets() {
            const ticketsJSON = localStorage.getItem(TICKETS_KEY);
            return ticketsJSON ? JSON.parse(ticketsJSON) : [];
        }
        
        function saveTickets(tickets) {
            localStorage.setItem(TICKETS_KEY, JSON.stringify(tickets));
        }
        
        function loadTicketTypes() {
            const typesJSON = localStorage.getItem(TICKET_TYPES_KEY);
            return typesJSON ? JSON.parse(typesJSON) : [
                {
                    id: 'general',
                    name: 'সাধারণ প্রবেশ',
                    price: 500,
                    description: 'কনসার্ট ভেন্যুতে সাধারণ প্রবেশের সুযোগ। পুরো সময় রক সঙ্গীত উপভোগ করুন।',
                    image: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                    ongoing: true
                },
                {
                    id: 'vip',
                    name: 'ভিআইপি এক্সপিরিয়েন্স',
                    price: 1200,
                    description: 'ভিআইপি লাউঞ্জ, সেরা আসন এবং বিশেষ সুবিধা সহ কনসার্ট উপভোগ করুন।',
                    image: 'https://images.unsplash.com/photo-1506157786151-b8491531f063?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                    ongoing: true
                },
                {
                    id: 'backstage',
                    name: 'ব্যাকস্টেজ পাস',
                    price: 2500,
                    description: 'ব্যাকস্টেজে প্রবেশ, শিল্পীদের সাথে সাক্ষাৎ এবং বিশেষ স্যুভেনির প্যাকেজ।',
                    image: 'https://images.unsplash.com/photo-1472653431158-6364773b2a56?ixlib=rb-1.2.1&auto=format&fit=crop&w=1349&q=80',
                    ongoing: true
                }
            ];
        }
        
        function saveTicketTypes(types) {
            localStorage.setItem(TICKET_TYPES_KEY, JSON.stringify(types));
        }
        
        function loadAdminCredentials() {
            const credentialsJSON = localStorage.getItem(ADMIN_CREDENTIALS_KEY);
            if (credentialsJSON) {
                return JSON.parse(credentialsJSON);
            } else {
                // ডিফল্ট এডমিন ক্রেডেনশিয়াল
                const defaultCredentials = {
                    username: 'admin',
                    password: 'sami2290@'
                };
                saveAdminCredentials(defaultCredentials);
                return defaultCredentials;
            }
        }
        
        function saveAdminCredentials(credentials) {
            localStorage.setItem(ADMIN_CREDENTIALS_KEY, JSON.stringify(credentials));
        }
        
        function loadEventDetails() {
            const detailsJSON = localStorage.getItem(EVENT_DETAILS_KEY);
            return detailsJSON ? JSON.parse(detailsJSON) : {
                date: "২৫ ডিসেম্বর ২০২৩",
                time: "সন্ধ্যা ৭:০০ - রাত ১১:০০",
                venue: "আর্মি স্টেডিয়াম, ঢাকা",
                artists: "আর্টসেল, ওয়ারফেইজ, নগরবাউল, শিরোনাম"
            };
        }
        
        function saveEventDetails(details) {
            localStorage.setItem(EVENT_DETAILS_KEY, JSON.stringify(details));
        }
        
        function loadPaymentConfig() {
            const configJSON = localStorage.getItem(PAYMENT_CONFIG_KEY);
            return configJSON ? JSON.parse(configJSON) : {
                bkash: "01823963097",
                nagad: "01823963097"
            };
        }
        
        function savePaymentConfig(config) {
            localStorage.setItem(PAYMENT_CONFIG_KEY, JSON.stringify(config));
        }
        
        // ইউটিলিটি ফাংশন
        function generateTicketSerial() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let serial = 'TK-';
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 4; j++) {
                    serial += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                if (i < 2) serial += '-';
            }
            return serial;
        }
        
        function generateQRCode(elementId, text) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            new QRCode(container, {
                text: text,
                width: 130,
                height: 130,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        }
        
        // DOM অপারেশন
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const tabButtons = document.querySelectorAll('.tab-btn');
            const mobileTabButtons = document.querySelectorAll('.mobile-tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const paymentOptions = document.querySelectorAll('.payment-option');
            const ticketForm = document.getElementById('ticketForm');
            const loginForm = document.getElementById('loginForm');
            const changePasswordForm = document.getElementById('changePasswordForm');
            const verifyTicketBtn = document.getElementById('verifyTicketBtn');
            const startScannerBtn = document.getElementById('startScanner');
            const stopScannerBtn = document.getElementById('stopScanner');
            const transactionId = document.getElementById('transactionId');
            const downloadTicketBtn = document.getElementById('downloadTicket');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const mobileMenuContainer = document.querySelector('.mobile-menu-container');
            const ongoingTicketTypes = document.getElementById('ongoingTicketTypes');
            const pastTicketTypes = document.getElementById('pastTicketTypes');
            const ticketTypeSelect = document.getElementById('ticketType');
            const logoutBtn = document.getElementById('logoutBtn');
            const eventForm = document.getElementById('eventForm');
            const addTicketTypeBtn = document.getElementById('addTicketTypeBtn');
            const updateTicketTypeBtn = document.getElementById('updateTicketTypeBtn');
            const cancelTicketEditBtn = document.getElementById('cancelTicketEditBtn');
            const savePaymentConfigBtn = document.getElementById('savePaymentConfigBtn');
            const ticketTypesTableBody = document.getElementById('ticketTypesTableBody');
            
            let scannerActive = false;
            let scanner = null;
            let editingTicketId = null;
            
            // Initialize application
            initApp();
            
            function initApp() {
                // Load and display data
                loadAndDisplayEventDetails();
                renderTicketTypes();
                loadAndDisplayPaymentConfig();
                
                // Set event listeners
                setupEventListeners();
            }
            
            function setupEventListeners() {
                // Tab switching
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const tabId = button.getAttribute('data-tab');
                        switchTab(tabId);
                    });
                });
                
                mobileTabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const tabId = button.getAttribute('data-tab');
                        switchTab(tabId);
                    });
                });
                
                // Mobile menu toggle
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenuContainer.classList.toggle('active');
                });
                
                // Payment option selection
                paymentOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        paymentOptions.forEach(opt => opt.classList.remove('selected'));
                        option.classList.add('selected');
                        const method = option.getAttribute('data-method');
                        document.getElementById('paymentMethod').value = method;
                        updatePaymentInfo(method);
                    });
                });
                
                // Ticket form submission
                ticketForm.addEventListener('submit', handleTicketFormSubmit);
                
                // Download ticket
                downloadTicketBtn.addEventListener('click', downloadTicket);
                
                // Admin login
                loginForm.addEventListener('submit', handleAdminLogin);
                
                // Event form submission
                eventForm.addEventListener('submit', handleEventFormSubmit);
                
                // Add ticket type
                addTicketTypeBtn.addEventListener('click', addTicketType);
                
                // Update ticket type
                updateTicketTypeBtn.addEventListener('click', updateTicketType);
                
                // Cancel ticket edit
                cancelTicketEditBtn.addEventListener('click', cancelTicketEdit);
                
                // Save payment config
                savePaymentConfigBtn.addEventListener('click', savePaymentConfig);
                
                // Change password
                changePasswordForm.addEventListener('submit', handlePasswordChange);
                
                // Logout
                logoutBtn.addEventListener('click', logoutAdmin);
                
                // Verify ticket
                verifyTicketBtn.addEventListener('click', verifyTicket);
                
                // QR scanner
                startScannerBtn.addEventListener('click', startScanner);
                stopScannerBtn.addEventListener('click', stopScanner);
            }
            
            function loadAndDisplayEventDetails() {
                const eventDetails = loadEventDetails();
                
                // Display on home page
                document.getElementById('eventDate').textContent = eventDetails.date;
                document.getElementById('eventTime').textContent = eventDetails.time;
                document.getElementById('eventVenue').textContent = eventDetails.venue;
                document.getElementById('eventArtists').textContent = eventDetails.artists;
                
                // Display in admin panel
                document.getElementById('currentEventDate').textContent = eventDetails.date;
                document.getElementById('currentEventTime').textContent = eventDetails.time;
                document.getElementById('currentEventVenue').textContent = eventDetails.venue;
                document.getElementById('currentEventArtists').textContent = eventDetails.artists;
                
                // Set form values
                document.getElementById('editEventDate').value = eventDetails.date;
                document.getElementById('editEventTime').value = eventDetails.time;
                document.getElementById('editEventVenue').value = eventDetails.venue;
                document.getElementById('editEventArtists').value = eventDetails.artists;
            }
            
            function loadAndDisplayPaymentConfig() {
                const paymentConfig = loadPaymentConfig();
                
                // Display in payment info
                document.getElementById('bkashNumber').textContent = paymentConfig.bkash;
                
                // Set form values
                document.getElementById('bkashNumberInput').value = paymentConfig.bkash;
                document.getElementById('nagadNumberInput').value = paymentConfig.nagad;
                
                // Display in admin panel
                document.getElementById('currentBkashNumber').textContent = paymentConfig.bkash;
                document.getElementById('currentNagadNumber').textContent = paymentConfig.nagad;
            }
            
            function renderTicketTypes() {
                const types = loadTicketTypes();
                ongoingTicketTypes.innerHTML = '';
                pastTicketTypes.innerHTML = '';
                ticketTypeSelect.innerHTML = '';
                ticketTypesTableBody.innerHTML = '';
                
                types.forEach(type => {
                    // Ongoing and past programs
                    if (type.ongoing) {
                        // Ongoing program
                        const ticketCard = document.createElement('div');
                        ticketCard.className = 'ticket-type-card';
                        ticketCard.innerHTML = `
                            <div class="ticket-cover" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${type.image}');">
                                <div class="ticket-price">৳ ${type.price}</div>
                            </div>
                            <div class="ticket-type-body">
                                <h3 class="ticket-type-title">${type.name}</h3>
                                <p class="ticket-type-desc">${type.description}</p>
                                <button class="select-ticket-btn" data-type="${type.id}">টিকিট কিনুন</button>
                            </div>
                        `;
                        ongoingTicketTypes.appendChild(ticketCard);
                        
                        // Add to ticket purchase form
                        const option = document.createElement('option');
                        option.value = type.id;
                        option.textContent = `${type.name} (৳ ${type.price})`;
                        ticketTypeSelect.appendChild(option);
                    } else {
                        // Past program
                        const ticketCard = document.createElement('div');
                        ticketCard.className = 'ticket-type-card';
                        ticketCard.innerHTML = `
                            <div class="ticket-cover" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${type.image}');">
                                <div class="ticket-price">৳ ${type.price}</div>
                                <div style="position: absolute; top: 12px; left: 12px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">সমাপ্ত</div>
                            </div>
                            <div class="ticket-type-body">
                                <h3 class="ticket-type-title">${type.name}</h3>
                                <p class="ticket-type-desc">${type.description}</p>
                                <div style="text-align: center; padding: 10px; background: rgba(255,77,0,0.1); border-radius: 8px; margin-top: 15px;">
                                    এই ইভেন্টটি সমাপ্ত হয়েছে
                                </div>
                            </div>
                        `;
                        pastTicketTypes.appendChild(ticketCard);
                    }
                    
                    // Add to admin table
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${type.name}</td>
                        <td>৳${type.price}</td>
                        <td>${type.ongoing ? 'চলমান' : 'সমাপ্ত'}</td>
                        <td>
                            <button class="btn btn-sm btn-warning edit-ticket-type-btn" data-id="${type.id}">সম্পাদনা</button>
                            <button class="btn btn-sm btn-danger delete-ticket-type-btn" data-id="${type.id}">মুছুন</button>
                        </td>
                    `;
                    ticketTypesTableBody.appendChild(row);
                });
                
                // Set event listeners for ticket type buttons
                document.querySelectorAll('.select-ticket-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const ticketType = this.getAttribute('data-type');
                        document.getElementById('ticketType').value = ticketType;
                        switchTab('buy');
                    });
                });
                
                document.querySelectorAll('.edit-ticket-type-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        editTicketType(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll('.delete-ticket-type-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        deleteTicketType(this.getAttribute('data-id'));
                    });
                });
            }
            
            function switchTab(tabId) {
                // Update active tab
                tabButtons.forEach(btn => btn.classList.remove('active'));
                mobileTabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
                document.getElementById(tabId).classList.add('active');
                
                // Close mobile menu
                mobileMenuContainer.classList.remove('active');
                
                // Stop scanner if switching tabs
                if (scannerActive) {
                    stopScanner();
                }
            }
            
            function updatePaymentInfo(method) {
                const paymentConfig = loadPaymentConfig();
                if (method === 'bkash') {
                    document.getElementById('paymentMethodTitle').textContent = 'বিকাশ পেমেন্ট নির্দেশনা';
                    document.getElementById('paymentDetails').innerHTML = `
                        বিকাশ নম্বর: <strong>${paymentConfig.bkash}</strong><br>
                        টাকা পাঠানোর পর অবশ্যই ট্রানজেকশন আইডি দিন
                    `;
                } else if (method === 'nagad') {
                    document.getElementById('paymentMethodTitle').textContent = 'নগদ পেমেন্ট নির্দেশনা';
                    document.getElementById('paymentDetails').innerHTML = `
                        নগদ নম্বর: <strong>${paymentConfig.nagad}</strong><br>
                        টাকা পাঠানোর পর অবশ্যই ট্রানজেকশন আইডি দিন
                    `;
                }
            }
            
            function handleTicketFormSubmit(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('email').value || 'N/A';
                const ticketType = document.getElementById('ticketType').value;
                const paymentMethod = document.getElementById('paymentMethod').value;
                const transaction = document.getElementById('transactionId').value;
                
                // Validation
                if (!transaction) {
                    alert('ট্রানজেকশন নম্বর প্রদান করুন!');
                    return;
                }
                
                // Create ticket object
                const ticket = {
                    id: generateTicketSerial(),
                    name: name,
                    phone: phone,
                    email: email,
                    type: ticketType,
                    payment: paymentMethod,
                    transaction: transaction,
                    status: 'pending',
                    date: new Date().toISOString()
                };
                
                // Save to localStorage
                const tickets = loadTickets();
                tickets.push(ticket);
                saveTickets(tickets);
                
                // Show ticket preview
                document.getElementById('ticketSerialDisplay').textContent = ticket.id;
                generateQRCode('ticketQrCode', ticket.id);
                document.getElementById('ticketPreview').classList.remove('hidden');
                
                // Reset form
                ticketForm.reset();
                paymentOptions[0].classList.add('selected');
                updatePaymentInfo('bkash');
                
                // Scroll to preview
                document.getElementById('ticketPreview').scrollIntoView({ behavior: 'smooth' });
            }
            
            // PDF ডাউনলোড ফাংশন আপডেট করা হয়েছে
            function downloadTicket() {
                const ticketPreview = document.getElementById('ticketPreview');
                const serial = document.getElementById('ticketSerialDisplay').textContent;
                
                // টিকিট প্রিভিউ এলিমেন্টের জন্য CSS পরিবর্তন (PDF-এর জন্য অপ্টিমাইজ)
                const originalStyles = {
                    background: ticketPreview.style.background,
                    border: ticketPreview.style.border,
                    width: ticketPreview.style.width,
                    margin: ticketPreview.style.margin,
                    color: ticketPreview.style.color
                };
                
                // PDF-এর জন্য স্টাইল অপ্টিমাইজেশন
                ticketPreview.style.background = 'white';
                ticketPreview.style.color = 'black';
                ticketPreview.style.border = 'none';
                ticketPreview.style.width = '400px';
                ticketPreview.style.margin = '0 auto';
                
                html2canvas(ticketPreview, {
                    scale: 2, // উচ্চ রেজোলিউশন
                    logging: false,
                    useCORS: true
                }).then(canvas => {
                    // মূল স্টাইলে ফিরিয়ে আনুন
                    ticketPreview.style.background = originalStyles.background;
                    ticketPreview.style.border = originalStyles.border;
                    ticketPreview.style.width = originalStyles.width;
                    ticketPreview.style.margin = originalStyles.margin;
                    ticketPreview.style.color = originalStyles.color;
                    
                    const imgData = canvas.toDataURL('image/png');
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    
                    // A4 সাইজের মাপ (mm)
                    const pageWidth = doc.internal.pageSize.getWidth();
                    const pageHeight = doc.internal.pageSize.getHeight();
                    
                    // ইমেজের মাপ
                    const imgWidth = pageWidth - 20; // পেজের প্রস্থ থেকে মার্জিন বাদ
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;
                    
                    // ইমেজ কেন্দ্রে পজিশন
                    const x = (pageWidth - imgWidth) / 2;
                    const y = (pageHeight - imgHeight) / 4;
                    
                    // ইমেজ যোগ
                    doc.addImage(imgData, 'PNG', x, y, imgWidth, imgHeight);
                    
                    // PDF ডাউনলোড
                    doc.save(`rockstar-ticket-${serial}.pdf`);
                });
            }
            
            function handleAdminLogin(e) {
                e.preventDefault();
                
                const username = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;
                const credentials = loadAdminCredentials();
                
                if (username === credentials.username && password === credentials.password) {
                    document.getElementById('adminLogin').classList.add('hidden');
                    document.getElementById('adminPanel').classList.remove('admin-panel');
                    renderTicketList();
                } else {
                    alert('ভুল ইউজারনেম বা পাসওয়ার্ড!');
                }
            }
            
            function handleEventFormSubmit(e) {
                e.preventDefault();
                
                const eventDetails = {
                    date: document.getElementById('editEventDate').value,
                    time: document.getElementById('editEventTime').value,
                    venue: document.getElementById('editEventVenue').value,
                    artists: document.getElementById('editEventArtists').value
                };
                
                saveEventDetails(eventDetails);
                loadAndDisplayEventDetails();
                
                alert('ইভেন্ট তথ্য সফলভাবে আপডেট করা হয়েছে!');
            }
            
            function addTicketType() {
                const ticketName = document.getElementById('ticketName').value;
                const ticketPrice = document.getElementById('ticketPrice').value;
                const ticketDescription = document.getElementById('ticketDescription').value;
                const ticketImage = document.getElementById('ticketImage').value;
                const ticketStatus = document.getElementById('ticketStatus').value;
                
                if (!ticketName || !ticketPrice || !ticketDescription || !ticketImage) {
                    alert('সকল ফিল্ড পূরণ করুন!');
                    return;
                }
                
                const ticketId = ticketName.toLowerCase().replace(/\s+/g, '-');
                const ongoing = ticketStatus === 'ongoing';
                
                const newTicketType = {
                    id: ticketId,
                    name: ticketName,
                    price: ticketPrice,
                    description: ticketDescription,
                    image: ticketImage,
                    ongoing: ongoing
                };
                
                // Save to localStorage
                const types = loadTicketTypes();
                types.push(newTicketType);
                saveTicketTypes(types);
                
                // Update UI
                renderTicketTypes();
                resetTicketTypeForm();
                
                alert(`"${ticketName}" টিকিট সফলভাবে যোগ করা হয়েছে!`);
            }
            
            function editTicketType(id) {
                const types = loadTicketTypes();
                const type = types.find(t => t.id === id);
                
                if (type) {
                    document.getElementById('ticketName').value = type.name;
                    document.getElementById('ticketPrice').value = type.price;
                    document.getElementById('ticketDescription').value = type.description;
                    document.getElementById('ticketImage').value = type.image;
                    document.getElementById('ticketStatus').value = type.ongoing ? 'ongoing' : 'past';
                    document.getElementById('ticketEditId').value = type.id;
                    
                    addTicketTypeBtn.classList.add('hidden');
                    updateTicketTypeBtn.classList.remove('hidden');
                    cancelTicketEditBtn.classList.remove('hidden');
                    
                    editingTicketId = id;
                }
            }
            
            function updateTicketType() {
                const ticketId = document.getElementById('ticketEditId').value;
                const ticketName = document.getElementById('ticketName').value;
                const ticketPrice = document.getElementById('ticketPrice').value;
                const ticketDescription = document.getElementById('ticketDescription').value;
                const ticketImage = document.getElementById('ticketImage').value;
                const ticketStatus = document.getElementById('ticketStatus').value;
                
                if (!ticketName || !ticketPrice || !ticketDescription || !ticketImage) {
                    alert('সকল ফিল্ড পূরণ করুন!');
                    return;
                }
                
                const ongoing = ticketStatus === 'ongoing';
                
                // Update ticket type
                const types = loadTicketTypes();
                const index = types.findIndex(t => t.id === ticketId);
                
                if (index !== -1) {
                    types[index] = {
                        id: ticketId,
                        name: ticketName,
                        price: ticketPrice,
                        description: ticketDescription,
                        image: ticketImage,
                        ongoing: ongoing
                    };
                    
                    saveTicketTypes(types);
                    renderTicketTypes();
                    resetTicketTypeForm();
                    
                    alert(`"${ticketName}" টিকিট সফলভাবে আপডেট করা হয়েছে!`);
                }
            }
            
            function cancelTicketEdit() {
                resetTicketTypeForm();
            }
            
            function resetTicketTypeForm() {
                document.getElementById('ticketName').value = '';
                document.getElementById('ticketPrice').value = '';
                document.getElementById('ticketDescription').value = '';
                document.getElementById('ticketImage').value = '';
                document.getElementById('ticketStatus').value = 'ongoing';
                document.getElementById('ticketEditId').value = '';
                
                addTicketTypeBtn.classList.remove('hidden');
                updateTicketTypeBtn.classList.add('hidden');
                cancelTicketEditBtn.classList.add('hidden');
                
                editingTicketId = null;
            }
            
            function deleteTicketType(id) {
                if (confirm('আপনি কি নিশ্চিত এই টিকিট প্রকারটি মুছে ফেলতে চান?')) {
                    let types = loadTicketTypes();
                    types = types.filter(t => t.id !== id);
                    saveTicketTypes(types);
                    renderTicketTypes();
                    alert('টিকিট প্রকার সফলভাবে মুছে ফেলা হয়েছে!');
                }
            }
            
            function savePaymentConfig() {
                const bkash = document.getElementById('bkashNumberInput').value;
                const nagad = document.getElementById('nagadNumberInput').value;
                
                if (!bkash || !nagad) {
                    alert('সকল ফিল্ড পূরণ করুন!');
                    return;
                }
                
                const config = {
                    bkash: bkash,
                    nagad: nagad
                };
                
                savePaymentConfig(config);
                loadAndDisplayPaymentConfig();
                
                alert('পেমেন্ট সেটিংস সফলভাবে সেভ করা হয়েছে!');
            }
            
            function handlePasswordChange(e) {
                e.preventDefault();
                
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const credentials = loadAdminCredentials();
                
                if (currentPassword !== credentials.password) {
                    alert('বর্তমান পাসওয়ার্ড ভুল!');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    alert('নতুন পাসওয়ার্ড মেলেনি!');
                    return;
                }
                
                if (newPassword.length < 6) {
                    alert('পাসওয়ার্ড অন্তত ৬ ক্যারেক্টার দীর্ঘ হতে হবে!');
                    return;
                }
                
                credentials.password = newPassword;
                saveAdminCredentials(credentials);
                alert('পাসওয়ার্ড সফলভাবে পরিবর্তন করা হয়েছে!');
                changePasswordForm.reset();
            }
            
            function logoutAdmin() {
                document.getElementById('adminLogin').classList.remove('hidden');
                document.getElementById('adminPanel').classList.add('admin-panel');
                loginForm.reset();
            }
            
            function renderTicketList() {
                const tickets = loadTickets();
                const ticketList = document.getElementById('ticketList');
                ticketList.innerHTML = '';
                
                if (tickets.length === 0) {
                    ticketList.innerHTML = '<p style="text-align:center; padding:20px; font-size:1.1rem;">কোন টিকিট পাওয়া যায়নি</p>';
                    return;
                }
                
                tickets.forEach(ticket => {
                    // Ticket status
                    let statusText = '';
                    let statusClass = '';
                    if (ticket.status === 'pending') {
                        statusText = 'Pending';
                        statusClass = 'status-pending';
                    } else if (ticket.status === 'accepted') {
                        statusText = 'Accepted';
                        statusClass = 'status-accepted';
                    } else {
                        statusText = 'Rejected';
                        statusClass = 'status-rejected';
                    }
                    
                    const ticketCard = document.createElement('div');
                    ticketCard.className = 'ticket-card';
                    ticketCard.innerHTML = `
                        <div class="ticket-status ${statusClass}">${statusText}</div>
                        <div class="ticket-header">
                            <h4>${ticket.id}</h4>
                        </div>
                        <div class="ticket-body">
                            <div class="ticket-info">
                                <span class="ticket-label">নাম:</span>
                                <span class="ticket-value">${ticket.name}</span>
                            </div>
                            <div class="ticket-info">
                                <span class="ticket-label">ফোন:</span>
                                <span class="ticket-value">${ticket.phone}</span>
                            </div>
                            <div class="ticket-info">
                                <span class="ticket-label">টিকিট ধরণ:</span>
                                <span class="ticket-value">${getTicketTypeName(ticket.type)}</span>
                            </div>
                            <div class="ticket-info">
                                <span class="ticket-label">পেমেন্ট:</span>
                                <span class="ticket-value">${getPaymentMethodName(ticket.payment)}</span>
                            </div>
                            <div class="ticket-info">
                                <span class="ticket-label">ট্রানজেকশন আইডি:</span>
                                <span class="ticket-value">${ticket.transaction}</span>
                            </div>
                            <div class="ticket-actions">
                                <button class="btn btn-sm btn-success accept-btn" data-id="${ticket.id}">গ্রহণ করুন</button>
                                <button class="btn btn-sm btn-danger reject-btn" data-id="${ticket.id}">প্রত্যাখ্যান করুন</button>
                                <button class="btn btn-sm delete-btn" data-id="${ticket.id}">মুছুন</button>
                            </div>
                        </div>
                    `;
                    
                    ticketList.appendChild(ticketCard);
                });
                
                // Set event listeners for ticket actions
                document.querySelectorAll('.accept-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        updateTicketStatus(this.getAttribute('data-id'), 'accepted');
                    });
                });
                
                document.querySelectorAll('.reject-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        updateTicketStatus(this.getAttribute('data-id'), 'rejected');
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        deleteTicket(this.getAttribute('data-id'));
                    });
                });
            }
            
            function getTicketTypeName(type) {
                const types = loadTicketTypes();
                const found = types.find(t => t.id === type);
                return found ? found.name : type;
            }
            
            function getPaymentMethodName(method) {
                const methods = {
                    'bkash': 'বিকাশ',
                    'nagad': 'নগদ'
                };
                return methods[method] || method;
            }
            
            function updateTicketStatus(ticketId, status) {
                const tickets = loadTickets();
                const ticketIndex = tickets.findIndex(t => t.id === ticketId);
                
                if (ticketIndex !== -1) {
                    tickets[ticketIndex].status = status;
                    saveTickets(tickets);
                    renderTicketList();
                    alert(`টিকিট স্ট্যাটাস আপডেট করা হয়েছে: ${status}`);
                }
            }
            
            function deleteTicket(ticketId) {
                if (confirm('আপনি কি নিশ্চিত এই টিকিটটি ডিলিট করতে চান?')) {
                    let tickets = loadTickets();
                    tickets = tickets.filter(t => t.id !== ticketId);
                    saveTickets(tickets);
                    renderTicketList();
                    alert('টিকিট সফলভাবে ডিলিট করা হয়েছে!');
                }
            }
            
            function verifyTicket() {
                const serial = document.getElementById('verifySerial').value.trim();
                const tickets = loadTickets();
                const ticket = tickets.find(t => t.id === serial);
                const resultDiv = document.getElementById('verificationResult');
                
                if (!ticket) {
                    resultDiv.className = 'verification-result result-invalid';
                    resultDiv.innerHTML = '<i class="fas fa-times-circle"></i> টিকিট সনাক্ত করা যায়নি!';
                    resultDiv.style.display = 'block';
                    return;
                }
                
                if (ticket.status === 'accepted') {
                    resultDiv.className = 'verification-result result-valid';
                    resultDiv.innerHTML = `
                        <i class="fas fa-check-circle"></i> ভ্যালিড টিকিট! 
                        <div>নাম: ${ticket.name}</div>
                        <div>স্ট্যাটাস: Accepted</div>
                        <div>ভেন্যুর টিকিট কাউন্টার থেকে আপনার টিকিট সংগ্রহ করুন</div>
                    `;
                } else if (ticket.status === 'rejected') {
                    resultDiv.className = 'verification-result result-invalid';
                    resultDiv.innerHTML = `
                        <i class="fas fa-times-circle"></i> টিকিট রিজেক্ট করা হয়েছে! 
                        <div>নাম: ${ticket.name}</div>
                        <div>স্ট্যাটাস: Rejected</div>
                    `;
                } else {
                    resultDiv.className = 'verification-result result-invalid';
                    resultDiv.innerHTML = `
                        <i class="fas fa-exclamation-triangle"></i> টিকিট এখনও ভেরিফাই হয়নি! 
                        <div>নাম: ${ticket.name}</div>
                        <div>স্ট্যাটাস: Pending</div>
                        <div>অনুগ্রহ করে এডমিনের সাথে যোগাযোগ করুন</div>
                    `;
                }
                
                resultDiv.style.display = 'block';
                resultDiv.scrollIntoView({ behavior: 'smooth' });
            }
            
            function startScanner() {
                const scannerElement = document.getElementById('scanner');
                
                // Check browser support
                if (!navigator.mediaDevices || !window.BarcodeDetector) {
                    alert('আপনার ব্রাউজারে QR কোড স্ক্যানিং সমর্থিত নয়।');
                    return;
                }
                
                scannerActive = true;
                startScannerBtn.style.display = 'none';
                stopScannerBtn.style.display = 'inline-block';
                
                // Access camera
                navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                    .then(function(stream) {
                        scannerElement.srcObject = stream;
                        scannerElement.play();
                        
                        // Initialize barcode detector
                        const barcodeDetector = new BarcodeDetector({ formats: ['qr_code'] });
                        
                        // Scanning process
                        scanner = setInterval(() => {
                            if (!scannerActive) return;
                            
                            barcodeDetector.detect(scannerElement)
                                .then(barcodes => {
                                    if (barcodes.length > 0) {
                                        const serial = barcodes[0].rawValue;
                                        document.getElementById('verifySerial').value = serial;
                                        verifyTicket(serial);
                                        stopScanner();
                                    }
                                })
                                .catch(err => {
                                    console.error('স্ক্যানিং ত্রুটি:', err);
                                });
                        }, 1000);
                    })
                    .catch(function(err) {
                        console.error('ক্যামেরা ত্রুটি:', err);
                        alert('ক্যামেরা অ্যাক্সেসে সমস্যা হয়েছে।');
                        stopScanner();
                    });
            }
            
            function stopScanner() {
                scannerActive = false;
                clearInterval(scanner);
                
                const scannerElement = document.getElementById('scanner');
                const stream = scannerElement.srcObject;
                if (stream) {
                    const tracks = stream.getTracks();
                    tracks.forEach(track => track.stop());
                    scannerElement.srcObject = null;
                }
                
                startScannerBtn.style.display = 'inline-block';
                stopScannerBtn.style.display = 'none';
            }
            
            // Initial setup
            paymentOptions[0].classList.add('selected');
            updatePaymentInfo('bkash');
        });
    </script>
</body>
</html>
